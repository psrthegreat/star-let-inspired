<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Voice Isolater</title>
    </head>
    <body>
        <div id="container">
            <audio id="audio" src="http://a1774.phobos.apple.com/us/r1000/076/Music/c5/ac/94/mzm.wmthwcny.aac.p.m4a" preload controls loop></audio>
            <div id="controls">
                <p>
                  Filter:
                    <input id="lowpass" type="range" value="5000" min="0" max="10000" step="10">
                    Type of filter:
                    <input type="number" id="filtertype" name="quantity" min="0" max="7">
                    <p id = "freq"></p>
                </p>
                <pre>
                    0: "lowpass", 1:"highpass", 2:"bandpass", 3: "lowshelf", 4: "highshelf", 5: "peaking", 6: "notch", 7: "allpass"
                </pre>
            </div>
        </div>
        <script>
			audioElement = document.getElementById('audio');
			audioContext = new webkitAudioContext();

			function init() {
				source = audioContext.createMediaElementSource(audioElement);
				filter = audioContext.createBiquadFilter();
				source.connect(filter);
				filter.connect(audioContext.destination);
				filter.type = 1;
				filter.frequency.value = 440;
				analyser.connect(audioContext.destination);
			}


			window.onload = init;
			document.getElementById("lowpass").addEventListener('change', function(e) {
				filter.frequency.value = this.value;
			});

			document.getElementById("filtertype").addEventListener('change', function(e) {
				filter.type = this.value;
			});
        </script>
    </body>
</html>