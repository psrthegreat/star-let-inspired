<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Vocalet</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        hi
        <script src="./js/vendor/jquery-1.9.1.min.js"></script>

        <script>
			var sop = ["Mariah Carey", "Ellie Goulding", "Christina Aguilera", "Britney Spears"];
			var mez = ["beyonce", "janet jackson", "madonna", "Aretha Franklin", "Whitney Houston", "Cheryl Cole", "Katherine Jenkins"];
			var con = ["Adele", "katy perry", "lady gaga", "lana del ray", "amy winehouse", "stevie nicks", "Gloria Estefan", "Alicia keys"];
			var bar = ["bruce springsteen", "bing crosby", "ringo starr", "Frank Sinatra", "Johnny Cash", "Eric Clapton", "David Lee Roth", "Ben King", "Elvis presley"];
			var ten = ["bono", "micheal jackson", "Bruno mars", "Jon Bon Jovi", "Justin Timberlake", "Freddie Mercury"];
			var vt = [];
			var names = ["Soprano", "Mezzo-Soprano", "Contralto", "Baritone", "Tenor"];
			vt.push(sop);
			vt.push(mez);
			vt.push(con);
			vt.push(bar);
			vt.push(ten);
			var searchLimit = 20;
			function loopOverTypes() {
				for (var i = 0; i < vt.length; i++) {
					getSongs(vt[i], i);
				}
			}

			function pushArtistToDatabase(data, typeIndex) {
				for (var i = 0; i < data.resultCount; i++) {
					var result = data.results[i];
					var songTitle = result.trackCensoredName;
					var artist = result.artistName;
					addToDatabase(songTitle, artist, typeIndex);
				}
			}

			function iSearch(artist, typeIndex) {
				$.ajax({
					url : "http://itunes.apple.com/search?term=" + artist + "&media=music&entity=song&limit=" + searchLimit,
					dataType : 'JSONP'
				}).done(function(data) {
					//console.log(data);
					if (data.resultCount != 0) {
						pushArtistToDatabase(data, typeIndex);
					}
				}).fail(function(data) {
					unsuccessfulRequestMessage();
				});

			}

			function getSongs(type, typeIndex) {
				for (var i = 0; i < type.length; i++) {
					var artist = type[i];
					iSearch(artist, typeIndex);
				}
			}

			function addToDatabase(songTitle, artist, typeIndex) {
				console.log(songTitle + " " + artist + " " + typeIndex);
				/*				$.ajax({
				 url: "file.php",
				 type: 'POST',
				 data: {title: songTitle, artist: artist, type: typeIndex},
				 dataType: 'json',
				 success: function() {
				 console.log("successfully written");
				 }
				 error: function() {
				 console.log("gotta check this ajax post call");
				 }
				 });
				 */
			}

			loopOverTypes();
        </script>
    </body>
</html>
